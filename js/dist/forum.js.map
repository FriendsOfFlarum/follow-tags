{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@fof/follow-tags/webpack/bootstrap","webpack://@fof/follow-tags/webpack/runtime/compat get default export","webpack://@fof/follow-tags/webpack/runtime/define property getters","webpack://@fof/follow-tags/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/follow-tags/webpack/runtime/make namespace object","webpack://@fof/follow-tags/external root \"flarum.core.compat['forum/app']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@fof/follow-tags/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@fof/follow-tags/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/follow-tags/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/app']\"","webpack://@fof/follow-tags/./src/common/utils/followingPageOptions.js","webpack://@fof/follow-tags/./src/forum/utils/getDefaultFollowingFiltering.js","webpack://@fof/follow-tags/./src/forum/utils/isFollowingPage.ts","webpack://@fof/follow-tags/./src/common/index.ts","webpack://@fof/follow-tags/./src/forum/utils/index.ts","webpack://@fof/follow-tags/./src/forum/utils/subscriptionOptions.ts","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/Component']\"","webpack://@fof/follow-tags/./src/forum/components/SubscriptionOptionItem.tsx","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@fof/follow-tags/./src/forum/components/SubscriptionModal.tsx","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@fof/follow-tags/./src/forum/components/SubscriptionStateButton.js","webpack://@fof/follow-tags/./src/forum/addSubscriptionControls.js","webpack://@fof/follow-tags/external root \"flarum.core.compat['forum/states/DiscussionListState']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/components/Dropdown']\"","webpack://@fof/follow-tags/./src/forum/components/FollowingPageFilterDropdown.js","webpack://@fof/follow-tags/./src/forum/addFollowedTagsDiscussions.js","webpack://@fof/follow-tags/external root \"flarum.core.compat['forum/components/Notification']\"","webpack://@fof/follow-tags/./src/forum/components/NewDiscussionNotification.js","webpack://@fof/follow-tags/./src/forum/icons.js","webpack://@fof/follow-tags/./src/forum/components/NewPostNotification.js","webpack://@fof/follow-tags/./src/forum/components/NewDiscussionTagNotification.js","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/models/Discussion']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/components/Badge']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['forum/components/SettingsPage']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/components/FieldSet']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/components/Select']\"","webpack://@fof/follow-tags/./src/forum/addPreferences.js","webpack://@fof/follow-tags/external root \"flarum.core.compat['forum/components/NotificationGrid']\"","webpack://@fof/follow-tags/./src/forum/components/index.ts","webpack://@fof/follow-tags/./src/forum/index.ts","webpack://@fof/follow-tags/./src/forum/addDiscussionBadge.js","webpack://@fof/follow-tags/./src/forum/extendNotificationGrid.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","import app from 'flarum/common/app';\n\nlet opts;\n\nexport default (section) =>\n  opts ||\n  (opts = ['none', 'tags'].reduce((o, key) => {\n    o[key] = app.translator.trans(`fof-follow-tags.${section}.following_${key}_label`);\n\n    return o;\n  }, {}));\n","import app from 'flarum/forum/app';\nimport followingPageOptions from '../../common/utils/followingPageOptions';\n\nexport let options;\n\nexport const getOptions = () => {\n  if (!options) {\n    options = followingPageOptions('forum.index.following');\n  }\n\n  return options;\n};\n\nexport const getDefaultFollowingFiltering = () => {\n  getOptions();\n\n  let value = app.data['fof-follow-tags.following_page_default'];\n\n  if (!options[value]) {\n    value = null;\n  }\n\n  if (app.session.user) {\n    const preference = app.session.user.preferences().followTagsPageDefault;\n\n    if (options[preference]) {\n      value = preference;\n    }\n  }\n\n  return value || 'none';\n};\n","import app from 'flarum/forum/app';\n\nexport default () => 'flarum-subscriptions' in flarum.extensions && m.route.get().includes(app.route('following'));\n","import followingPageOptions from './utils/followingPageOptions';\n\nexport const utils = {\n  followingPageOptions,\n};\n","import { options, getOptions, getDefaultFollowingFiltering } from './getDefaultFollowingFiltering';\nimport isFollowingPage from './isFollowingPage';\nimport subscriptionOptions from './subscriptionOptions';\nimport { utils as commonUtils } from '../../common';\n\nexport const utils = {\n  options,\n  getOptions,\n  getDefaultFollowingFiltering,\n  isFollowingPage,\n  subscriptionOptions,\n  ...commonUtils,\n};\n","type SubscriptionOption = {\n  subscription: string;\n  icon: string;\n  labelKey: string;\n  descriptionKey: string;\n};\n\nconst subscriptionOptions: SubscriptionOption[] = [\n  {\n    subscription: 'not_follow',\n    icon: 'far fa-star',\n    labelKey: 'fof-follow-tags.forum.sub_controls.not_following_button',\n    descriptionKey: 'fof-follow-tags.forum.sub_controls.not_following_text',\n  },\n  {\n    subscription: 'follow',\n    icon: 'fas fa-star',\n    labelKey: 'fof-follow-tags.forum.sub_controls.following_button',\n    descriptionKey: 'fof-follow-tags.forum.sub_controls.following_text',\n  },\n  {\n    subscription: 'lurk',\n    icon: 'fas fa-eye',\n    labelKey: 'fof-follow-tags.forum.sub_controls.lurking_button',\n    descriptionKey: 'fof-follow-tags.forum.sub_controls.lurking_text',\n  },\n  {\n    subscription: 'ignore',\n    icon: 'fas fa-bell-slash',\n    labelKey: 'fof-follow-tags.forum.sub_controls.ignoring_button',\n    descriptionKey: 'fof-follow-tags.forum.sub_controls.ignoring_text',\n  },\n  {\n    subscription: 'hide',\n    icon: 'fas fa-eye-slash',\n    labelKey: 'fof-follow-tags.forum.sub_controls.hiding_button',\n    descriptionKey: 'fof-follow-tags.forum.sub_controls.hiding_text',\n  },\n];\n\nexport default subscriptionOptions;\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","import app from 'flarum/forum/app';\nimport icon from 'flarum/common/helpers/icon';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\n\ninterface SubscriptionOptionItemAttrs extends ComponentAttrs {\n  active: boolean;\n  icon: string;\n  labelKey: string;\n  descriptionKey: string;\n  onclick: () => void;\n}\n\nexport default class SubscriptionOptionItem extends Component<SubscriptionOptionItemAttrs> {\n  view() {\n    const isSelected = this.attrs.active;\n\n    return (\n      <div className={`SubscriptionOption ${isSelected ? 'selected' : ''}`} onclick={this.attrs.onclick}>\n        {icon(this.attrs.icon, { className: 'SubscriptionOption-icon' })}\n        <span className=\"SubscriptionOption-title\">{app.translator.trans(this.attrs.labelKey)}</span>\n        <div className=\"SubscriptionOption-description\">{app.translator.trans(this.attrs.descriptionKey)}</div>\n        {isSelected && icon('fas fa-check', { className: 'SubscriptionOption-selectedIcon' })}\n      </div>\n    );\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","import app from 'flarum/forum/app';\nimport Modal, { IInternalModalAttrs } from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport { utils } from '../utils';\nimport SubscriptionOptionItem from './SubscriptionOptionItem';\nimport type Mithril from 'mithril';\nimport Tag from 'flarum/tags/models/Tag';\nimport Stream from 'flarum/common/utils/Stream';\nimport Tooltip from 'flarum/common/components/Tooltip';\n\ninterface ISubscriptionModalAttrs extends IInternalModalAttrs {\n  model?: Tag;\n}\n\nexport default class SubscriptionModal extends Modal<ISubscriptionModalAttrs> {\n  subscription!: string;\n  loading: Stream<boolean>;\n  canShowTooltip: boolean | undefined = undefined;\n\n  oninit(vnode: Mithril.Vnode<ISubscriptionModalAttrs, this>): void {\n    super.oninit(vnode);\n    this.loading = Stream(false);\n    this.subscription = this.attrs.model.subscription() || 'not_follow';\n\n    const preferences = app.session.user?.preferences();\n    const notifyEmail = preferences['notify_newPostInTag_email'];\n    const notifyAlert = preferences['notify_newPostInTag_alert'];\n\n    if ((notifyEmail || notifyAlert) && this.subscription === 'not_follow') {\n      this.canShowTooltip = true;\n    } else {\n      this.canShowTooltip = false;\n    }\n  }\n\n  className() {\n    return 'SubscriptionModal Modal--medium';\n  }\n\n  title() {\n    return app.translator.trans('fof-follow-tags.forum.sub_controls.header', {\n      tagName: this.attrs.model.name(),\n    });\n  }\n\n  content() {\n    const preferences = app.session.user?.preferences();\n    const notifyEmail = preferences['notify_newPostInTag_email'];\n    const notifyAlert = preferences['notify_newPostInTag_alert'];\n\n    return (\n      <div className=\"Modal-body\">\n        {this.formOptionItems().toArray()}\n        <div className=\"Form-group\">\n          <Button className=\"Button Button--primary\" onclick={() => this.saveSubscription(this.subscription)} loading={this.loading()}>\n            {app.translator.trans('fof-follow-tags.forum.sub_controls.submit_button')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  formOptionItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\n      'subscription_type',\n      <div className=\"Form-group\">\n        <label>{app.translator.trans('fof-follow-tags.forum.sub_controls.subscription_label', { tagName: this.attrs.model.name() })}</label>\n        {this.subscriptionOptionItems().toArray()}\n      </div>,\n      60\n    );\n\n    return items;\n  }\n\n  subscriptionOptionItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n    let priority = 100;\n\n    utils.subscriptionOptions.forEach((option, index) => {\n      const attrs = {\n        ...option,\n        onclick: () => {\n          this.subscription = option.subscription;\n          this.canShowTooltip = false;\n        },\n        active: this.subscription === option.subscription,\n        disabled: option.subscription === 'hide' && this.attrs.model.isHidden(),\n      };\n\n      items.add(`subscription-option-${index}`, <SubscriptionOptionItem {...attrs} />, priority);\n      priority -= 5;\n    });\n\n    return items;\n  }\n\n  saveSubscription(subscription: string) {\n    const tag = this.attrs.model;\n\n    this.loading(true);\n\n    this.subscription = subscription;\n\n    app\n      .request({\n        url: `${app.forum.attribute('apiUrl')}/tags/${tag.id()}/subscription`,\n        method: 'POST',\n        body: {\n          data: this.requestData(),\n        },\n      })\n      .then((res: any) => app.store.pushPayload(res))\n      .then(() => {\n        this.loading(false);\n\n        m.redraw();\n        this.hide();\n      });\n  }\n\n  requestData(): { [key: string]: string } {\n    return { subscription: this.subscription };\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Tooltip'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","import app from 'flarum/forum/app';\nimport Button from 'flarum/common/components/Button';\nimport { utils } from '../utils';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport extractText from 'flarum/common/utils/extractText';\nimport Stream from 'flarum/common/utils/Stream';\n\nexport default class SubscriptionStateButton extends Button {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.loading = Stream(false);\n    this.canShowTooltip = Stream(false);\n  }\n\n  onbeforeupdate(vnode) {\n    super.onbeforeupdate(vnode);\n\n    const subscription = this.attrs.subscription || false;\n\n    const preferences = app.session.user.preferences();\n    const notifyEmail = preferences['notify_newPostInTag_email'];\n    const notifyAlert = preferences['notify_newPostInTag_alert'];\n\n    if ((notifyEmail || notifyAlert) && subscription === false) {\n      this.canShowTooltip(undefined);\n    } else {\n      this.canShowTooltip(false);\n    }\n  }\n\n  view(vnode) {\n    const subscription = this.attrs.subscription || false;\n    let option = utils.subscriptionOptions.find((opt) => opt.subscription === subscription);\n\n    let buttonIcon = option ? option.icon : 'fas fa-star';\n    let buttonLabel = option ? app.translator.trans(option.labelKey) : app.translator.trans('fof-follow-tags.forum.sub_controls.follow_button');\n\n    this.attrs.className = (this.attrs.className || '') + ' SubscriptionButton ' + 'SubscriptionButton--' + subscription;\n    this.attrs.icon = buttonIcon;\n\n    const preferences = app.session.user.preferences();\n    const notifyEmail = preferences['notify_newPostInTag_email'];\n\n    const tooltipText = extractText(\n      app.translator.trans(\n        notifyEmail ? 'fof-follow-tags.forum.sub_controls.notify_email_tooltip' : 'fof-follow-tags.forum.sub_controls.notify_alert_tooltip'\n      )\n    );\n\n    return (\n      <Tooltip\n        text={\n          // By adding this constraint we make sure that when we explicitly set the\n          // value of `canShowTooltip` to `false`, the internal `shouldRecreateTooltip`\n          // property of the `Tooltip` component is set to `true` and we can, in that\n          // way, switch between 'manual' and 'hover' trigger modes for the tooltip.\n          typeof this.canShowTooltip() === 'boolean' ? '' : tooltipText\n        }\n        tooltipVisible={this.canShowTooltip()}\n        position=\"bottom\"\n        delay={250}\n      >\n        {super.view(Object.assign({}, vnode, { children: buttonLabel }))}\n      </Tooltip>\n    );\n  }\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport Model from 'flarum/common/Model';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport SubscriptionModal from './components/SubscriptionModal';\nimport SubscriptionStateButton from './components/SubscriptionStateButton';\n\nexport default () => {\n  app.store.models.tags.prototype.subscription = Model.attribute('subscription');\n\n  extend(IndexPage.prototype, 'sidebarItems', function (items) {\n    if (!this.currentTag() || !app.session.user) return;\n\n    const tag = this.currentTag();\n\n    if (items.has('newDiscussion')) items.setPriority('newDiscussion', 10);\n\n    items.add(\n      'subscriptionButton',\n      <SubscriptionStateButton\n        className=\"Button App-primaryControl\"\n        subscription={tag.subscription()}\n        onclick={() => app.modal.show(SubscriptionModal, { model: tag })}\n      />,\n      5\n    );\n  });\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/states/DiscussionListState'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Dropdown'];","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\n\nimport Button from 'flarum/common/components/Button';\nimport Dropdown from 'flarum/common/components/Dropdown';\n\nimport { getDefaultFollowingFiltering, getOptions } from '../utils/getDefaultFollowingFiltering';\n\nexport default class FollowingPageFilterDropdown extends Component {\n  view() {\n    const selected = app.discussions.followTags;\n    const options = this.options();\n\n    return Dropdown.component(\n      {\n        buttonClassName: 'Button',\n        label: options[selected] || getDefaultFollowingFiltering(),\n      },\n      Object.keys(options).map((key) => {\n        const active = key === selected;\n\n        return Button.component(\n          {\n            active,\n            icon: active ? 'fas fa-check' : true,\n            onclick: () => {\n              app.discussions.followTags = key;\n\n              app.discussions.refresh();\n            },\n          },\n          options[key]\n        );\n      })\n    );\n  }\n\n  options() {\n    return getOptions();\n  }\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\n\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport DiscussionListState from 'flarum/forum/states/DiscussionListState';\n\nimport isFollowingPage from './utils/isFollowingPage';\n\nimport { getDefaultFollowingFiltering } from './utils/getDefaultFollowingFiltering';\nimport FollowingPageFilterDropdown from './components/FollowingPageFilterDropdown';\n\nexport default () => {\n  extend(DiscussionListState.prototype, 'requestParams', function (params) {\n    if (!isFollowingPage() || !app.session.user) return;\n\n    if (!this.followTags) {\n      this.followTags = getDefaultFollowingFiltering();\n    }\n\n    const followTags = this.followTags;\n\n    if (app.current.get('routeName') === 'following' && followTags === 'tags') {\n      params.filter['following-tag'] = true;\n\n      delete params.filter.subscription;\n    }\n  });\n\n  extend(IndexPage.prototype, 'viewItems', function (items) {\n    if (!isFollowingPage() || !app.session.user) {\n      return;\n    }\n\n    items.add('follow-tags', <FollowingPageFilterDropdown />);\n  });\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/Notification'];","import app from 'flarum/forum/app';\nimport Notification from 'flarum/forum/components/Notification';\n\nexport default class NewDiscussionNotification extends Notification {\n  icon() {\n    return 'fas fa-user-tag';\n  }\n\n  href() {\n    const notification = this.attrs.notification;\n    const discussion = notification.subject();\n\n    return app.route.discussion(discussion);\n  }\n\n  content() {\n    return app.translator.trans('fof-follow-tags.forum.notifications.new_discussion_text', {\n      user: this.attrs.notification.fromUser(),\n      title: this.attrs.notification.subject().title(),\n    });\n  }\n\n  excerpt() {\n    return null;\n  }\n}\n","export default {\n  [false]: 'fas fa-star',\n  follow: 'fas fa-star',\n  lurk: 'fas fa-comments',\n  ignore: 'fas fa-bell-slash',\n  hide: 'fas fa-eye-slash',\n};\n","import app from 'flarum/forum/app';\nimport Notification from 'flarum/forum/components/Notification';\n\nimport icons from '../icons';\n\nexport default class NewPostNotification extends Notification {\n  icon() {\n    return icons.lurk;\n  }\n\n  href() {\n    const notification = this.attrs.notification;\n    const discussion = notification.subject();\n    const content = notification.content() || {};\n\n    return app.route.discussion(discussion, content.postNumber);\n  }\n\n  content() {\n    return app.translator.trans('fof-follow-tags.forum.notifications.new_post_text', { user: this.attrs.notification.fromUser() });\n  }\n\n  excerpt() {\n    return null;\n  }\n}\n","import app from 'flarum/forum/app';\nimport Notification from 'flarum/forum/components/Notification';\n\nexport default class NewDiscussionTagNotification extends Notification {\n  icon() {\n    return 'fas fa-user-tag';\n  }\n\n  href() {\n    const notification = this.attrs.notification;\n    const discussion = notification.subject();\n\n    return app.route.discussion(discussion);\n  }\n\n  content() {\n    return app.translator.trans('fof-follow-tags.forum.notifications.new_discussion_tag_text', {\n      user: this.attrs.notification.fromUser(),\n      title: this.attrs.notification.subject().title(),\n    });\n  }\n\n  excerpt() {\n    return null;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Discussion'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Badge'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/SettingsPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/FieldSet'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Select'];","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\n\nimport SettingsPage from 'flarum/forum/components/SettingsPage';\nimport FieldSet from 'flarum/common/components/FieldSet';\nimport Select from 'flarum/common/components/Select';\n\nimport { getOptions, getDefaultFollowingFiltering } from './utils/getDefaultFollowingFiltering';\n\nexport default () => {\n  extend(SettingsPage.prototype, 'settingsItems', function (items) {\n    items.add(\n      'fof-follow-tags',\n      FieldSet.component(\n        {\n          label: app.translator.trans('fof-follow-tags.forum.user.settings.heading'),\n          className: 'Settings-follow-tags',\n        },\n        [\n          <div className=\"Form-group\">\n            <p>{app.translator.trans('fof-follow-tags.forum.user.settings.filter_label')}</p>\n            {Select.component({\n              options: getOptions(),\n              value: this.user.preferences().followTagsPageDefault || getDefaultFollowingFiltering(),\n              onchange: (value) => {\n                this.user.savePreferences({ followTagsPageDefault: value }).then(() => {\n                  m.redraw();\n                });\n              },\n            })}\n          </div>,\n        ]\n      )\n    );\n  });\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/NotificationGrid'];","import FollowingPageFilterDropdown from './FollowingPageFilterDropdown';\nimport NewDiscussionNotification from './NewDiscussionNotification';\nimport NewDiscussionTagNotification from './NewDiscussionTagNotification';\nimport NewPostNotification from './NewPostNotification';\nimport SubscriptionModal from './SubscriptionModal';\nimport SubscriptionOptionItem from './SubscriptionOptionItem';\nimport SubscriptionStateButton from './SubscriptionStateButton';\n\nexport const components = {\n  FollowingPageFilterDropdown,\n  NewDiscussionNotification,\n  NewDiscussionTagNotification,\n  NewPostNotification,\n  SubscriptionModal,\n  SubscriptionOptionItem,\n  SubscriptionStateButton,\n};\n","import app from 'flarum/forum/app';\nimport addSubscriptionControls from './addSubscriptionControls';\nimport addFollowedTagsDiscussions from './addFollowedTagsDiscussions';\nimport NewDiscussionNotification from './components/NewDiscussionNotification';\nimport NewPostNotification from './components/NewPostNotification';\nimport NewDiscussionTagNotification from './components/NewDiscussionTagNotification';\nimport addDiscussionBadge from './addDiscussionBadge';\nimport addPreferences from './addPreferences';\nimport extendNotificationGrid from './extendNotificationGrid';\n\nexport * from './components';\nexport * from './utils';\n\napp.initializers.add(\n  'fof/follow-tags',\n  () => {\n    if (!app.initializers.has('flarum-tags')) {\n      console.error('[fof/follow-tags] flarum/tags is not enabled');\n      return;\n    }\n\n    addSubscriptionControls();\n\n    if ('flarum-subscriptions' in flarum.extensions) {\n      addDiscussionBadge();\n      addFollowedTagsDiscussions();\n      addPreferences();\n    }\n\n    app.notificationComponents.newPostInTag = NewPostNotification;\n    app.notificationComponents.newDiscussionInTag = NewDiscussionNotification;\n    app.notificationComponents.newDiscussionTag = NewDiscussionTagNotification;\n\n    extendNotificationGrid();\n  },\n  -1\n);\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport Discussion from 'flarum/common/models/Discussion';\nimport Badge from 'flarum/common/components/Badge';\n\nimport isFollowingPage from './utils/isFollowingPage';\n\nexport default function addSubscriptionBadge() {\n  extend(Discussion.prototype, 'badges', function (badges) {\n    if (!isFollowingPage() || !this.tags()) {\n      return;\n    }\n\n    const subscriptions = this.tags()\n      .map((tag) => tag.subscription())\n      .filter((state) => ['lurk', 'follow'].includes(state));\n\n    const type = subscriptions.includes('lurk') ? 'lurking' : 'following';\n\n    if (subscriptions.length) {\n      badges.add(\n        'followTags',\n        Badge.component({\n          label: app.translator.trans(`fof-follow-tags.forum.badge.${type}_tag_tooltip`),\n          icon: 'fas fa-user-tag',\n          type: `${type}-tag`,\n        })\n      );\n    }\n  });\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport NotificationGrid from 'flarum/forum/components/NotificationGrid';\n\nexport default function extendNotificationGrid() {\n  extend(NotificationGrid.prototype, 'notificationTypes', function (items) {\n    items.add('newDiscussionInTag', {\n      name: 'newDiscussionInTag',\n      icon: 'fas fa-user-tag',\n      label: app.translator.trans('fof-follow-tags.forum.settings.notify_new_discussion_label'),\n    });\n\n    items.add('newPostInTag', {\n      name: 'newPostInTag',\n      icon: 'fas fa-user-tag',\n      label: app.translator.trans('fof-follow-tags.forum.settings.notify_new_post_label'),\n    });\n\n    items.add('newDiscussionTag', {\n      name: 'newDiscussionTag',\n      icon: 'fas fa-user-tag',\n      label: app.translator.trans('fof-follow-tags.forum.settings.notify_new_discussion_tag_label'),\n    });\n  });\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_extends","assign","bind","target","i","arguments","length","source","apply","this","_setPrototypeOf","p","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","create","constructor","opts","section","reduce","app","trans","options","getOptions","followingPageOptions","getDefaultFollowingFiltering","user","preference","preferences","followTagsPageDefault","extensions","m","route","includes","utils","isFollowingPage","subscriptionOptions","subscription","icon","labelKey","descriptionKey","SubscriptionOptionItem","view","isSelected","attrs","active","className","onclick","Component","SubscriptionModal","loading","canShowTooltip","undefined","oninit","vnode","Stream","model","notifyEmail","notifyAlert","title","tagName","name","content","formOptionItems","toArray","saveSubscription","items","ItemList","add","subscriptionOptionItems","priority","forEach","option","index","disabled","isHidden","tag","url","attribute","id","method","body","data","requestData","then","res","pushPayload","redraw","hide","Modal","SubscriptionStateButton","onbeforeupdate","find","opt","buttonIcon","buttonLabel","tooltipText","extractText","text","tooltipVisible","position","delay","children","Button","FollowingPageFilterDropdown","selected","followTags","Dropdown","buttonClassName","label","keys","map","refresh","NewDiscussionNotification","href","discussion","notification","subject","fromUser","excerpt","Notification","follow","lurk","ignore","NewPostNotification","icons","postNumber","NewDiscussionTagNotification","components","has","models","tags","Model","extend","IndexPage","currentTag","setPriority","show","Discussion","badges","subscriptions","filter","state","type","Badge","DiscussionListState","params","SettingsPage","FieldSet","Select","onchange","savePreferences","newPostInTag","newDiscussionInTag","newDiscussionTag","NotificationGrid","console","error"],"sourceRoot":""}