{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@fof/follow-tags/webpack/bootstrap","webpack://@fof/follow-tags/webpack/runtime/compat get default export","webpack://@fof/follow-tags/webpack/runtime/define property getters","webpack://@fof/follow-tags/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/follow-tags/webpack/runtime/make namespace object","webpack://@fof/follow-tags/external root \"flarum.core.compat['forum/app']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['forum/components/NotificationGrid']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@fof/follow-tags/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/follow-tags/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/components/Dropdown']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/Component']\"","webpack://@fof/follow-tags/./src/forum/components/SubscriptionMenuItem.js","webpack://@fof/follow-tags/./src/forum/icons.js","webpack://@fof/follow-tags/./src/forum/components/SubscriptionMenu.js","webpack://@fof/follow-tags/./src/forum/addSubscriptionControls.js","webpack://@fof/follow-tags/external root \"flarum.core.compat['forum/states/DiscussionListState']\"","webpack://@fof/follow-tags/./src/forum/utils/isFollowingPage.js","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/app']\"","webpack://@fof/follow-tags/./src/common/utils/followingPageOptions.js","webpack://@fof/follow-tags/./src/forum/utils/getDefaultFollowingFiltering.js","webpack://@fof/follow-tags/./src/forum/components/FollowingPageFilterDropdown.js","webpack://@fof/follow-tags/./src/forum/addFollowedTagsDiscussions.js","webpack://@fof/follow-tags/external root \"flarum.core.compat['forum/components/Notification']\"","webpack://@fof/follow-tags/./src/forum/components/NewDiscussionNotification.js","webpack://@fof/follow-tags/./src/forum/components/NewPostNotification.js","webpack://@fof/follow-tags/./src/forum/components/NewDiscussionTagNotification.js","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/models/Discussion']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/components/Badge']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['forum/components/SettingsPage']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/components/FieldSet']\"","webpack://@fof/follow-tags/external root \"flarum.core.compat['common/components/Select']\"","webpack://@fof/follow-tags/./src/forum/components/index.js","webpack://@fof/follow-tags/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@fof/follow-tags/./src/common/index.ts","webpack://@fof/follow-tags/./src/forum/utils/index.js","webpack://@fof/follow-tags/./src/forum/index.js","webpack://@fof/follow-tags/./src/forum/addDiscussionBadge.js","webpack://@fof/follow-tags/./src/forum/addPreferences.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/NotificationGrid'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Dropdown'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Tooltip'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","import Component from 'flarum/common/Component';\nimport icon from 'flarum/common/helpers/icon';\nimport classList from 'flarum/common/utils/classList';\n\nexport default class SubscriptionMenuItem extends Component {\n  view() {\n    const attrs = {\n      onclick: this.attrs.onclick,\n      disabled: this.attrs.disabled,\n    };\n\n    return (\n      <button className={classList('SubscriptionMenuItem', 'hasIcon', this.attrs.disabled && 'disabled')} {...attrs}>\n        {this.attrs.active ? icon('fas fa-check', { className: 'Button-icon' }) : ''}\n        <span className=\"SubscriptionMenuItem-label\">\n          {icon(this.attrs.icon, { className: 'Button-icon' })}\n          <strong>{this.attrs.label}</strong>\n          <span className=\"SubscriptionMenuItem-description\">{this.attrs.description}</span>\n        </span>\n      </button>\n    );\n  }\n}\n","export default {\n  [false]: 'fas fa-star',\n  follow: 'fas fa-star',\n  lurk: 'fas fa-comments',\n  ignore: 'fas fa-bell-slash',\n  hide: 'fas fa-eye-slash',\n};\n","import app from 'flarum/forum/app';\nimport Dropdown from 'flarum/common/components/Dropdown';\nimport Button from 'flarum/common/components/Button';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport icon from 'flarum/common/helpers/icon';\nimport classList from 'flarum/common/utils/classList';\nimport extractText from 'flarum/common/utils/extractText';\nimport Stream from 'flarum/common/utils/Stream';\n\nimport SubscriptionMenuItem from './SubscriptionMenuItem';\nimport icons from '../icons';\n\nexport default class SubscriptionMenu extends Dropdown {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.loading = Stream(false);\n    this.canShowTooltip = Stream(false);\n\n    this.options = [\n      {\n        subscription: false,\n        icon: icons[false],\n        label: app.translator.trans('fof-follow-tags.forum.sub_controls.not_following_button'),\n        description: app.translator.trans('fof-follow-tags.forum.sub_controls.not_following_text'),\n      },\n      {\n        subscription: 'follow',\n        icon: icons.follow,\n        label: app.translator.trans('fof-follow-tags.forum.sub_controls.following_button'),\n        description: app.translator.trans('fof-follow-tags.forum.sub_controls.following_text'),\n      },\n      {\n        subscription: 'lurk',\n        icon: icons.lurk,\n        label: app.translator.trans('fof-follow-tags.forum.sub_controls.lurking_button'),\n        description: app.translator.trans('fof-follow-tags.forum.sub_controls.lurking_text'),\n      },\n      {\n        subscription: 'ignore',\n        icon: icons.ignore,\n        label: app.translator.trans('fof-follow-tags.forum.sub_controls.ignoring_button'),\n        description: app.translator.trans('fof-follow-tags.forum.sub_controls.ignoring_text'),\n      },\n      {\n        subscription: 'hide',\n        icon: icons.hide,\n        label: app.translator.trans('fof-follow-tags.forum.sub_controls.hiding_button'),\n        description: app.translator.trans('fof-follow-tags.forum.sub_controls.hiding_text'),\n      },\n    ];\n  }\n\n  onbeforeupdate(vnode) {\n    super.onbeforeupdate(vnode);\n\n    const tag = this.attrs.model;\n    const subscription = tag.subscription() || false;\n\n    const preferences = app.session.user.preferences();\n    const notifyEmail = preferences['notify_newPostInTag_email'];\n    const notifyAlert = preferences['notify_newPostInTag_alert'];\n\n    if ((notifyEmail || notifyAlert) && subscription === false) {\n      this.canShowTooltip(undefined);\n    } else {\n      this.canShowTooltip(false);\n    }\n  }\n\n  view() {\n    const tag = this.attrs.model;\n    const subscription = tag.subscription() || false;\n\n    let buttonLabel = app.translator.trans('fof-follow-tags.forum.sub_controls.follow_button');\n    let buttonIcon = icons[subscription] || 'far fa-star';\n    const buttonClass = 'SubscriptionMenu-button--' + subscription;\n\n    if (['follow', 'lurk', 'ignore', 'hide'].includes(subscription)) {\n      const word = ['ignore', 'hide'].includes(subscription) ? subscription.slice(0, subscription.length - 1) : subscription;\n\n      buttonLabel = app.translator.trans(`fof-follow-tags.forum.sub_controls.${word}ing_button`);\n    }\n\n    const preferences = app.session.user.preferences();\n    const notifyEmail = preferences['notify_newPostInTag_email'];\n\n    const tooltipText = extractText(\n      app.translator.trans(\n        notifyEmail ? 'fof-follow-tags.forum.sub_controls.notify_email_tooltip' : 'fof-follow-tags.forum.sub_controls.notify_alert_tooltip'\n      )\n    );\n\n    return (\n      <div className=\"Dropdown ButtonGroup SubscriptionMenu App-primaryControl\">\n        <Tooltip\n          text={\n            // By adding this constraint we make sure that when we explicitly set the\n            // value of `canShowTooltip` to `false`, the internal `shouldRecreateTooltip`\n            // property of the `Tooltip` componennt is set to `true` and we can, in that\n            // way, switch between 'manual' and 'hover' trigger modes for the tooltip.\n            typeof this.canShowTooltip() === 'boolean' ? '' : tooltipText\n          }\n          tooltipVisible={this.canShowTooltip()}\n          position=\"bottom\"\n          delay={250}\n        >\n          {Button.component(\n            {\n              className: 'Button SubscriptionMenu-button ' + buttonClass,\n              icon: buttonIcon,\n              onclick: this.saveSubscription.bind(this, tag, ['follow', 'lurk', 'ignore', 'hide'].includes(subscription) ? false : 'follow'),\n              loading: this.loading(),\n            },\n            buttonLabel\n          )}\n        </Tooltip>\n        <button className={classList('Dropdown-toggle', 'Button', 'Button--icon', buttonClass)} data-toggle=\"dropdown\">\n          {icon('fas fa-caret-down', { className: 'Button-icon' })}\n        </button>\n\n        <ul className=\"Dropdown-menu dropdown-menu Dropdown-menu--right\">\n          {this.options.map((attrs) => {\n            attrs.onclick = this.saveSubscription.bind(this, tag, attrs.subscription);\n            attrs.active = subscription === attrs.subscription;\n            attrs.disabled = attrs.subscription === 'hide' && tag.isHidden();\n\n            return <li>{SubscriptionMenuItem.component(attrs)}</li>;\n          })}\n        </ul>\n      </div>\n    );\n  }\n\n  saveSubscription(tag, subscription) {\n    this.loading(true);\n\n    app\n      .request({\n        url: `${app.forum.attribute('apiUrl')}/tags/${tag.id()}/subscription`,\n        method: 'POST',\n        body: {\n          data: {\n            subscription,\n          },\n        },\n      })\n      .then((res) => app.store.pushPayload(res))\n      .then(() => {\n        this.loading(false);\n        m.redraw();\n      });\n\n    this.canShowTooltip(false);\n  }\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport Model from 'flarum/common/Model';\nimport IndexPage from 'flarum/forum/components/IndexPage';\n\nimport SubscriptionMenu from './components/SubscriptionMenu';\n\nexport default () => {\n  app.store.models.tags.prototype.subscription = Model.attribute('subscription');\n\n  extend(IndexPage.prototype, 'sidebarItems', function (items) {\n    if (!this.currentTag() || !app.session.user) return;\n\n    const tag = this.currentTag();\n\n    if (items.has('newDiscussion')) items.replace('newDiscussion', null, 10);\n\n    items.add('subscription', SubscriptionMenu.component({ model: tag, itemClassName: 'App-primaryControl' }), 5);\n  });\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/states/DiscussionListState'];","import app from 'flarum/forum/app';\n\nexport default () => 'flarum-subscriptions' in flarum.extensions && m.route.get().includes(app.route('following'));\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","import app from 'flarum/common/app';\n\nlet opts;\n\nexport default (section) =>\n  opts ||\n  (opts = ['none', 'tags'].reduce((o, key) => {\n    o[key] = app.translator.trans(`fof-follow-tags.${section}.following_${key}_label`);\n\n    return o;\n  }, {}));\n","import app from 'flarum/forum/app';\nimport followingPageOptions from '../../common/utils/followingPageOptions';\n\nexport let options;\n\nexport const getOptions = () => {\n  if (!options) {\n    options = followingPageOptions('forum.index.following');\n  }\n\n  return options;\n};\n\nexport const getDefaultFollowingFiltering = () => {\n  getOptions();\n\n  let value = app.data['fof-follow-tags.following_page_default'];\n\n  if (!options[value]) {\n    value = null;\n  }\n\n  if (app.session.user) {\n    const preference = app.session.user.preferences().followTagsPageDefault;\n\n    if (options[preference]) {\n      value = preference;\n    }\n  }\n\n  return value || 'none';\n};\n","import app from 'flarum/forum/app';\nimport Component from 'flarum/common/Component';\n\nimport Button from 'flarum/common/components/Button';\nimport Dropdown from 'flarum/common/components/Dropdown';\n\nimport { getDefaultFollowingFiltering, getOptions } from '../utils/getDefaultFollowingFiltering';\n\nexport default class FollowingPageFilterDropdown extends Component {\n  view() {\n    const selected = app.discussions.followTags;\n    const options = this.options();\n\n    return Dropdown.component(\n      {\n        buttonClassName: 'Button',\n        label: options[selected] || getDefaultFollowingFiltering(),\n      },\n      Object.keys(options).map((key) => {\n        const active = key === selected;\n\n        return Button.component(\n          {\n            active,\n            icon: active ? 'fas fa-check' : true,\n            onclick: () => {\n              app.discussions.followTags = key;\n\n              app.discussions.refresh();\n            },\n          },\n          options[key]\n        );\n      })\n    );\n  }\n\n  options() {\n    return getOptions();\n  }\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\n\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport DiscussionListState from 'flarum/forum/states/DiscussionListState';\n\nimport isFollowingPage from './utils/isFollowingPage';\n\nimport { getDefaultFollowingFiltering } from './utils/getDefaultFollowingFiltering';\nimport FollowingPageFilterDropdown from './components/FollowingPageFilterDropdown';\n\nexport default () => {\n  extend(DiscussionListState.prototype, 'requestParams', function (params) {\n    if (!isFollowingPage() || !app.session.user) return;\n\n    if (!this.followTags) {\n      this.followTags = getDefaultFollowingFiltering();\n    }\n\n    const followTags = this.followTags;\n\n    if (app.current.get('routeName') === 'following' && followTags === 'tags') {\n      params.filter['following-tag'] = true;\n\n      delete params.filter.subscription;\n    }\n  });\n\n  extend(IndexPage.prototype, 'viewItems', function (items) {\n    if (!isFollowingPage() || !app.session.user) {\n      return;\n    }\n\n    items.add('follow-tags', <FollowingPageFilterDropdown />);\n  });\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/Notification'];","import app from 'flarum/forum/app';\nimport Notification from 'flarum/forum/components/Notification';\n\nexport default class NewDiscussionNotification extends Notification {\n  icon() {\n    return 'fas fa-user-tag';\n  }\n\n  href() {\n    const notification = this.attrs.notification;\n    const discussion = notification.subject();\n\n    return app.route.discussion(discussion);\n  }\n\n  content() {\n    return app.translator.trans('fof-follow-tags.forum.notifications.new_discussion_text', {\n      user: this.attrs.notification.fromUser(),\n      title: this.attrs.notification.subject().title(),\n    });\n  }\n\n  excerpt() {\n    return null;\n  }\n}\n","import app from 'flarum/forum/app';\nimport Notification from 'flarum/forum/components/Notification';\n\nimport icons from '../icons';\n\nexport default class NewPostNotification extends Notification {\n  icon() {\n    return icons.lurk;\n  }\n\n  href() {\n    const notification = this.attrs.notification;\n    const discussion = notification.subject();\n    const content = notification.content() || {};\n\n    return app.route.discussion(discussion, content.postNumber);\n  }\n\n  content() {\n    return app.translator.trans('fof-follow-tags.forum.notifications.new_post_text', { user: this.attrs.notification.fromUser() });\n  }\n\n  excerpt() {\n    return null;\n  }\n}\n","import app from 'flarum/forum/app';\nimport Notification from 'flarum/forum/components/Notification';\n\nexport default class NewDiscussionTagNotification extends Notification {\n  icon() {\n    return 'fas fa-user-tag';\n  }\n\n  href() {\n    const notification = this.attrs.notification;\n    const discussion = notification.subject();\n\n    return app.route.discussion(discussion);\n  }\n\n  content() {\n    return app.translator.trans('fof-follow-tags.forum.notifications.new_discussion_tag_text', {\n      user: this.attrs.notification.fromUser(),\n      title: this.attrs.notification.subject().title(),\n    });\n  }\n\n  excerpt() {\n    return null;\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Discussion'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Badge'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/SettingsPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/FieldSet'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Select'];","import FollowingPageFilterDropdown from './FollowingPageFilterDropdown';\nimport NewDiscussionNotification from './NewDiscussionNotification';\nimport NewDiscussionTagNotification from './NewDiscussionTagNotification';\nimport NewPostNotification from './NewPostNotification';\nimport SubscriptionMenu from './SubscriptionMenu';\nimport SubscriptionMenuItem from './SubscriptionMenuItem';\n\nexport const components = {\n  FollowingPageFilterDropdown,\n  NewDiscussionNotification,\n  NewDiscussionTagNotification,\n  NewPostNotification,\n  SubscriptionMenu,\n  SubscriptionMenuItem,\n};\n","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","import followingPageOptions from './utils/followingPageOptions';\n\nexport const utils = {\n  followingPageOptions,\n};\n","import { options, getOptions, getDefaultFollowingFiltering } from './getDefaultFollowingFiltering';\nimport isFollowingPage from './isFollowingPage';\nimport { utils as commonUtils } from '../../common';\n\nexport const utils = {\n  options,\n  getOptions,\n  getDefaultFollowingFiltering,\n  isFollowingPage,\n  ...commonUtils,\n};\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport NotificationGrid from 'flarum/forum/components/NotificationGrid';\n\nimport addSubscriptionControls from './addSubscriptionControls';\nimport addFollowedTagsDiscussions from './addFollowedTagsDiscussions';\n\nimport NewDiscussionNotification from './components/NewDiscussionNotification';\nimport NewPostNotification from './components/NewPostNotification';\nimport NewDiscussionTagNotification from './components/NewDiscussionTagNotification';\nimport addDiscussionBadge from './addDiscussionBadge';\nimport addPreferences from './addPreferences';\n\nexport * from './components';\nexport * from './utils';\n\napp.initializers.add(\n  'fof/follow-tags',\n  () => {\n    if (!app.initializers.has('flarum-tags')) {\n      console.error('[fof/follow-tags] flarum/tags is not enabled');\n      return;\n    }\n\n    addSubscriptionControls();\n\n    if ('flarum-subscriptions' in flarum.extensions) {\n      addDiscussionBadge();\n      addFollowedTagsDiscussions();\n      addPreferences();\n    }\n\n    app.notificationComponents.newPostInTag = NewPostNotification;\n    app.notificationComponents.newDiscussionInTag = NewDiscussionNotification;\n    app.notificationComponents.newDiscussionTag = NewDiscussionTagNotification;\n\n    extend(NotificationGrid.prototype, 'notificationTypes', function (items) {\n      items.add('newDiscussionInTag', {\n        name: 'newDiscussionInTag',\n        icon: 'fas fa-user-tag',\n        label: app.translator.trans('fof-follow-tags.forum.settings.notify_new_discussion_label'),\n      });\n\n      items.add('newPostInTag', {\n        name: 'newPostInTag',\n        icon: 'fas fa-user-tag',\n        label: app.translator.trans('fof-follow-tags.forum.settings.notify_new_post_label'),\n      });\n\n      items.add('newDiscussionTag', {\n        name: 'newDiscussionTag',\n        icon: 'fas fa-user-tag',\n        label: app.translator.trans('fof-follow-tags.forum.settings.notify_new_discussion_tag_label'),\n      });\n    });\n  },\n  -1\n);\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport Discussion from 'flarum/common/models/Discussion';\nimport Badge from 'flarum/common/components/Badge';\n\nimport isFollowingPage from './utils/isFollowingPage';\n\nexport default function addSubscriptionBadge() {\n  extend(Discussion.prototype, 'badges', function (badges) {\n    if (!isFollowingPage() || !this.tags()) {\n      return;\n    }\n\n    const subscriptions = this.tags()\n      .map((tag) => tag.subscription())\n      .filter((state) => ['lurk', 'follow'].includes(state));\n\n    const type = subscriptions.includes('lurk') ? 'lurking' : 'following';\n\n    if (subscriptions.length) {\n      badges.add(\n        'followTags',\n        Badge.component({\n          label: app.translator.trans(`fof-follow-tags.forum.badge.${type}_tag_tooltip`),\n          icon: 'fas fa-user-tag',\n          type: `${type}-tag`,\n        })\n      );\n    }\n  });\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\n\nimport SettingsPage from 'flarum/forum/components/SettingsPage';\nimport FieldSet from 'flarum/common/components/FieldSet';\nimport Select from 'flarum/common/components/Select';\n\nimport { getOptions, getDefaultFollowingFiltering } from './utils/getDefaultFollowingFiltering';\n\nexport default () => {\n  extend(SettingsPage.prototype, 'settingsItems', function (items) {\n    items.add(\n      'fof-follow-tags',\n      FieldSet.component(\n        {\n          label: app.translator.trans('fof-follow-tags.forum.user.settings.heading'),\n          className: 'Settings-follow-tags',\n        },\n        [\n          <div className=\"Form-group\">\n            <p>{app.translator.trans('fof-follow-tags.forum.user.settings.filter_label')}</p>\n            {Select.component({\n              options: getOptions(),\n              value: this.user.preferences().followTagsPageDefault || getDefaultFollowingFiltering(),\n              onchange: (value) => {\n                this.user.savePreferences({ followTagsPageDefault: value }).then(() => {\n                  m.redraw();\n                });\n              },\n            })}\n          </div>,\n        ]\n      )\n    );\n  });\n};\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","SubscriptionMenuItem","view","attrs","onclick","this","disabled","className","classList","active","icon","label","description","Component","follow","lurk","ignore","hide","SubscriptionMenu","oninit","vnode","loading","Stream","canShowTooltip","options","subscription","icons","app","onbeforeupdate","model","preferences","notifyEmail","notifyAlert","undefined","tag","buttonLabel","buttonIcon","buttonClass","includes","word","slice","length","tooltipText","extractText","text","tooltipVisible","position","delay","Button","saveSubscription","map","isHidden","component","url","id","method","body","data","then","res","m","redraw","Dropdown","extensions","route","opts","section","reduce","getOptions","followingPageOptions","getDefaultFollowingFiltering","preference","followTagsPageDefault","FollowingPageFilterDropdown","selected","buttonClassName","keys","NewDiscussionNotification","href","discussion","notification","subject","content","user","fromUser","title","excerpt","Notification","NewPostNotification","postNumber","NewDiscussionTagNotification","components","_extends","assign","target","i","arguments","source","apply","utils","isFollowingPage","Model","extend","IndexPage","items","currentTag","has","replace","add","itemClassName","Discussion","badges","tags","subscriptions","filter","state","type","Badge","DiscussionListState","params","followTags","SettingsPage","FieldSet","Select","onchange","savePreferences","NotificationGrid","name","console","error"],"sourceRoot":""}